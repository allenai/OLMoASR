version: v2
budget: ai2/oe-data
description: Copy wds shards to another directory
tasks:
  - name: copy_wds
    image:
      beaker: huongn/ow_data_processing
    command: ['/bin/bash', '-c']
    arguments: ["find /weka/huongn/ow_440K_wds -type f -name '*.tar' | xargs -P 48 -I {} cp {} /weka/huongn/ow_440K_wds_copy"]
    datasets:
    - mountPath: /weka
      source:
        weka: oe-data-default
    result:
      path: /data/huongn/data_processing
    context:
      preemptible: true
    constraints:
      cluster:
        - ai2/jupiter-cirrascale-2