# base image - pytorch
FROM pytorch/pytorch:2.6.0-cuda12.4-cudnn9-runtime

# setting the environment variables
ENV LC_ALL=C.UTF-8
ENV LANG=C.UTF-8

# creating a directory for the project
WORKDIR /stage/

# copying requirements file
COPY requirements/requirements-eval.txt requirements-eval.txt

# installing dependencies
RUN apt-get clean && rm -rf /var/lib/apt/lists/* && \
    apt-get update && \
    apt-get install -y --no-install-recommends gnupg curl ca-certificates && \
    apt-get install -y git wget curl build-essential ffmpeg
RUN pip install -r requirements-eval.txt

# copying necessary files and directories to container
COPY open_whisper open_whisper/
COPY scripts/eval scripts/eval/
COPY logs logs/